<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title></title><link rel="shortcut icon"/><link href="//fonts.googleapis.com/css?family=Lora:400,400italic,700|Open+Sans:700" rel="stylesheet" type="text/css"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:125%;line-height:1.5em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsl(0,0%,20%);font-family:Lora,serif;font-weight:400;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:2.25rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.7411rem;line-height:2.25rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:2.25rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:2.25rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.1487rem;line-height:1.5rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.5rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}ul{margin-left:1.5rem;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5rem;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}p{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding:1.5rem;margin-bottom:1.5rem;font-size:0.85rem;line-height:1.42;background:hsl(0,0%,97%);border-radius:3px;overflow:auto;}table{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;font-size:1rem;line-height:1.5rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}blockquote{margin-left:1.5rem;margin-right:1.5rem;margin-top:0;padding:0;margin-bottom:1.5rem;}form{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:calc(1.5rem - 1px);background:hsl(0,0%,80%);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.5rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}li > ul{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}code{font-size:0.85rem;line-height:1.5rem;}kbd{font-size:0.85rem;line-height:1.5rem;}samp{font-size:0.85rem;line-height:1.5rem;}abbr{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;}acronym{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;}abbr[title]{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsl(0,0%,88%);padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:calc(0.75rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}@media only screen and (max-width:768px){h1{font-size:2rem;line-height:2.25rem;}h2{font-size:1.7411rem;line-height:2.25rem;}h3{font-size:1.51572rem;line-height:2.25rem;}h4{font-size:1.31951rem;line-height:2.25rem;}h5{font-size:1.1487rem;line-height:1.5rem;}h6{font-size:1rem;line-height:1.5rem;}}tt,code{background-color:rgba(0,0,0,0.04);border-radius:3px;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:hsl(0,0%,97%);line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}</style><link rel="stylesheet" href="/styles.css"/></head><body class="landing-page"><div id="react-mount"><div style="max-width:36rem;margin-left:auto;margin-right:auto;padding:3rem 0.75rem;" data-reactroot="" data-reactid="1" data-react-checksum="779187407"><div data-reactid="2"><h3 style="display:inline-block;" data-reactid="3"><a style="text-decoration:none;color:inherit;" href="/" data-reactid="4">iamdustan.com</a></h3><a style="margin-left:1em;" href="/projects/" data-reactid="5">Projects</a><a style="margin-left:0.5em;" href="/" data-reactid="6">Blog</a></div><div class="markdown" data-reactid="7"><h1 data-reactid="8">JSX. The Cognitive Hack</h1><em style="display:block;margin-bottom:3rem;" data-reactid="9"><!-- react-text: 10 -->Posted <!-- /react-text --><!-- react-text: 11 -->February 13, 2015<!-- /react-text --></em><div data-reactid="12"><p>This short article is intended to convince the JSX holdouts a little bit more on
why HTML in your JavaScript through JSX is a great idea.</p>
<hr>
<p>For years we’ve been taught—and in turn echoed the belief—that HTML is our
structure and JS is our behavior layer. <strong>HTML should only go in *.html
files.</strong> Now I am certain there are some historical reasons for this, many of
which are likely still relevant if you work in a DOM-as-source-of-truth world.</p>
<p>Then you look at this thing React which speaks of itself as a library for
building UIs and it spits mud in the face of all you hold dear by sticking
this HTML <strong>right in the daggum middle of your JavaScript file. What lunacy is
this?!?!</strong></p>
<p>Let’s take a step back and give the engineers who built this the benefit of the
doubt for a moment. These are, inarguably, extremely intelligent individuals
working on projects at scale, both in terms of developers touching the codebase
and product size. Not only that, they’re eating their dogfood by using this in
production. (For the uninitiated, React was originally created by the engineers
at Facebook and Instagram where they use it to power their web products.)</p>
<p>Knee-jerk reactions are expected, but let’s move beyond that for a moment.
To echo the sentiments of other folks: <strong>give React half a day</strong>. Literally. If you
already have experience building UIs, you can be productive and confident with
what you are writing with React in a mere 4 hours.</p>
<p>React’s approach fundamentally joins two disparate joints of the same limb
together. Yes, your structure and behavior are no longer spread across
technologies or files. With React components these two parts of the same thing
travel together and <em>cannot</em> be separated.</p>
<h2>A short example</h2>
<p>Let’s say we want the expressive power of an iOS or Android style <code>Switch</code>
component.  Transferring this concept to the web in a <code>form</code>-based way, I would
choose to create some HTML around a <code>checkbox</code> input to accomplish this because
the interface I would expect for a <code>switch</code> is identical to that of a <code>switch</code>.</p>
<ul>
<li><code>onChange</code> event handlers</li>
<li><code>checked</code> state (only slightly different semantics from <code>on|off</code>)</li>
<li><code>name</code></li>
<li><code>id</code></li>
<li><code>label</code></li>
<li>et cetera</li>
</ul>
<p>First, let’s take a quick look at what consuming this component looks like. What
I would would want as the application developer would look something like this:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/api/endpoint"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Switch</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"Send robots to hug Dustan?"</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">{true}</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>Very clear and very expressive, no? Now let’s implement this with React.</p>
<pre><code class="language-jsx"><span class="hljs-comment">/**
 * An iOS or Android style Switch element.
 * The interface is that of a standard input[type="checkbox"] control, with the
 * addition of a `label` property.
 * 
 * Pseudo-ASCII-art UI:
 *   On:  (•|_)
 *   Off: (_|•)
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Switch</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  getInitialState() {
    <span class="hljs-keyword">return</span> {<span class="hljs-attr">id</span> : <span class="hljs-keyword">this</span>.props.id || UUID()};
  }

  render() {
    <span class="hljs-keyword">var</span> {label, ...props} = <span class="hljs-keyword">this</span>.props;

    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">{this.state.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"Switch"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"Switch-label"</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"Switch-ui"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">"Switch-input"</span>
            <span class="hljs-attr">name</span>=<span class="hljs-string">{this.state.id}</span>
            {<span class="hljs-attr">...props</span>} /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"switch__toggle"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    );
  }
}
</span></code></pre>
<p>Speaking only of the JSX part, part of the beauty is that it creates an
automatic cognitive context switch due to the clear, visual structural change.
There is a tight coupling between your behavior and your view. React components
embrace this innate fact and marry them together in a sane and maintainable way;
they co-locate these related concerns.</p>
<p><strong>JSX is the affordance for your brain to automatically context switch.</strong> This
switch from behavior to view requires no additional effort on your part.</p>
<h2>What about my other concerns?</h2>
<p>Granted, this leaves a few pieces of your components concerns out of the
picture. Namely, style and data fetching. The React team isn’t prescriptive
about how <em>you</em> choose to solve these problems.</p>
<p>There are a number of CSS in JavaScript approaches (more blasphemy!) such as
<a href="https://github.com/chenglou/rcss">RCSS</a> and
<a href="https://github.com/js-next/react-style">react-style</a>, and
<a href="https://github.com/reactjs/react-future/blob/master/04%20-%20Layout/04%20-%20Inline%20Styles.md">react-future/layout</a>.
I would highly recommend Christopher Chedou’s slides on the subject:
<a href="https://speakerdeck.com/vjeux/react-css-in-js">react-css-in-js</a></p>
<p>For data fetching, GraphQL was just announced at React Conf and it is seriously
blowing my mind. Watch the video <a href="https://www.youtube.com/watch?v=9sc8Pyc51uU">Data fetching for React applications at
Facebook</a> and read the Q&amp;A on <a href="https://gist.github.com/wincent/598fa75e22bdfa44cf47">this
gist</a> by one of
the designers of the system: Nick Schrock.</p>
</div><hr style="margin-bottom:3rem;" data-reactid="13"/><noscript data-reactid="14"></noscript><div data-reactid="15"><img src="/iamdustan.jpg" style="border:1px solid #fff;box-shadow:0 0 2px rgba(0, 0, 0, 0.125);float:left;transform:rotate(90deg);margin-top:0.5rem;width:3.75rem;" data-reactid="16"/><p style="margin-left:3.375rem;" data-reactid="17"><!-- react-text: 18 -->These words brought to you by <!-- /react-text --><strong data-reactid="19">Dustan Kasten</strong><!-- react-text: 20 -->. A friendly, bearded, husband, father, and user interface engineer living in Charlotte, NC. Considers himself quite partial to React.js these days. <!-- /react-text --><a href="https://twitter.com/iamdustan" data-reactid="21">Find @iamdustan on Twitter</a></p></div></div><footer style="color:#999;font-size:0.5rem;text-align:right;" data-reactid="22"><span data-reactid="23"><!-- react-text: 24 -->Content licensed under <!-- /react-text --><a href="http://creativecommons.org/licenses/by-nc/4.0/" data-reactid="25">CC BY-NC 4.0</a></span></footer><span style="display:block;clear:both;" data-reactid="26"> </span></div></div><script src="/bundle.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-37699943-1', 'auto');ga('send', 'pageview');</script></script></body></html>