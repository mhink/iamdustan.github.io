<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title></title><link rel="shortcut icon"/><link href="//fonts.googleapis.com/css?family=Lora:400,400italic,700|Open+Sans:700" rel="stylesheet" type="text/css"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:125%;line-height:1.5em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsl(0,0%,20%);font-family:Lora,serif;font-weight:400;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:2.25rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.7411rem;line-height:2.25rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:2.25rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:2.25rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.1487rem;line-height:1.5rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;color:hsl(0,0%,25%);font-family:Open Sans,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.5rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}ul{margin-left:1.5rem;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5rem;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}p{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding:1.5rem;margin-bottom:1.5rem;font-size:0.85rem;line-height:1.42;background:hsl(0,0%,97%);border-radius:3px;overflow:auto;}table{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;font-size:1rem;line-height:1.5rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}blockquote{margin-left:1.5rem;margin-right:1.5rem;margin-top:0;padding:0;margin-bottom:1.5rem;}form{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:calc(1.5rem - 1px);background:hsl(0,0%,80%);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding:0;margin-bottom:1.5rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.5rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}li > ul{margin-left:1.5rem;margin-bottom:calc(1.5rem / 2);margin-top:calc(1.5rem / 2);}code{font-size:0.85rem;line-height:1.5rem;}kbd{font-size:0.85rem;line-height:1.5rem;}samp{font-size:0.85rem;line-height:1.5rem;}abbr{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;}acronym{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;}abbr[title]{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsl(0,0%,88%);padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:calc(0.75rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}@media only screen and (max-width:768px){h1{font-size:2rem;line-height:2.25rem;}h2{font-size:1.7411rem;line-height:2.25rem;}h3{font-size:1.51572rem;line-height:2.25rem;}h4{font-size:1.31951rem;line-height:2.25rem;}h5{font-size:1.1487rem;line-height:1.5rem;}h6{font-size:1rem;line-height:1.5rem;}}tt,code{background-color:rgba(0,0,0,0.04);border-radius:3px;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:hsl(0,0%,97%);line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}</style><link rel="stylesheet" href="/styles.css"/></head><body class="landing-page"><div id="react-mount"><div style="max-width:36rem;margin-left:auto;margin-right:auto;padding:3rem 0.75rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1852434583"><div data-reactid="2"><h3 style="display:inline-block;" data-reactid="3"><a style="text-decoration:none;color:inherit;" href="/" data-reactid="4">iamdustan.com</a></h3><a style="margin-left:1em;" href="/projects/" data-reactid="5">Projects</a><a style="margin-left:0.5em;" href="/" data-reactid="6">Blog</a></div><div class="markdown" data-reactid="7"><h1 data-reactid="8">React Hardware</h1><em style="display:block;margin-bottom:3rem;" data-reactid="9"><!-- react-text: 10 -->Posted <!-- /react-text --><!-- react-text: 11 -->December 16, 2015<!-- /react-text --></em><div data-reactid="12"><p>React is proving that its component-driven architecture and abstractions hold up
beyond browser-based user interfaces. React Native is bringing React’s authoring
and architectural style to iOS and Android. <a href="https://github.com/Yomguithereala">Guillaume Plique</a>
has written a <a href="https://github.com/Yomguithereal/react-blessed">react-blessed</a>
renderer for terminal-based UIs. Netflix has written React bindings for their
proprietary Gibbon rendering engine (<a href="https://www.youtube.com/watch?v=eNC0mRYGWgc">React Conf 2015 talk</a>).
I’ve been writing a renderer for the Firmata protocol so that you can manipulate
the real world with React.</p>
<p>Firmata is a standard protocol based on the midi message format for
communicating with microcontrollers from software running on a computer. There
are Firmata client bindings available in many languages: <a href="https://www.youtube.com/watch?v=eNC0mRYGWgc">https://github.com/firmata/protocol#firmata-client-libraries</a></p>
<h2>Declarative Hardware</h2>
<p>I’ve had an arduino sitting on my desk at home for the past 3 years. One of the
stumbling blocks to programming it was that I didn’t have a clear picture of how
to manage state on it. After using React for a few months, the idea that your
interface is the <a href="https://speakerdeck.com/jmorrell/jsconf-uy-flux-those-who-forget-the-past-dot-dot-dot-1?slide=4">function of state and props</a>
sounded quite appealing for hardware. What if one could merely say what the
physical hardware should look like and let React make it so? What if this was
able to create a blinking LED?</p>
<pre><code class="language-jsx">  <span class="hljs-comment">/*
    Blink
    Turns on an LED on for one second, then off for one second, repeatedly.
  */</span>
  <span class="hljs-keyword">var</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">'react-hardware'</span>);
  <span class="hljs-keyword">var</span> {Board, Led} = React;

  <span class="hljs-keyword">var</span> Program = React.createClass({
    getInitialState() {
      <span class="hljs-comment">// 0-255</span>
      <span class="hljs-keyword">return</span> {<span class="hljs-attr">value</span>: <span class="hljs-number">0</span>};
    },

    componentWillMount() {
      <span class="hljs-keyword">this</span>._interval = <span class="hljs-literal">null</span>;
    },

    componentDidMount() {
      <span class="hljs-keyword">this</span>._interval = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.state.value === <span class="hljs-number">255</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">255</span>;
        <span class="hljs-keyword">this</span>.setState({value})
      }, <span class="hljs-number">1000</span>);
    },

    componentWillUnmount() {
      clearInterval(<span class="hljs-keyword">this</span>._interval);
    },

    render() {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Board</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Led</span> <span class="hljs-attr">pin</span>=<span class="hljs-string">{13}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{this.state.value}</span>
        &lt;/<span class="hljs-attr">Board</span>&gt;</span>
      )
    }
  });

  React.render(<span class="hljs-tag">&lt;<span class="hljs-name">Program</span> /&gt;</span>, '/dev/cu.usbmodem1411');
</span></code></pre>
<p>Now what if you want a second flashing LED to compose together with the first?
Extracting the concept of an interface component into its own isolated world
with clear compositional boundaries—like this flashing LED—is a place where
React shines.</p>
<pre><code class="language-jsx"><span class="hljs-keyword">var</span> React = <span class="hljs-built_in">require</span>(<span class="hljs-string">'react-hardware'</span>);
<span class="hljs-keyword">var</span> {Board, Led} = ReactArduino;

<span class="hljs-keyword">var</span> FlashingLed = React.createClass({
  getInitialState() {
    <span class="hljs-keyword">return</span> {<span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>.propsstate.initialValue || <span class="hljs-number">0</span>};
  },

  getDefaultProps() {
    <span class="hljs-keyword">return</span> {<span class="hljs-attr">interval</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">delay</span>: <span class="hljs-number">0</span>};
  },

  componentWillMount() {
    <span class="hljs-keyword">this</span>._interval = <span class="hljs-literal">null</span>;
  },

  componentDidMount() {
    <span class="hljs-keyword">var</span> start = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>._interval = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
          <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.state.value === <span class="hljs-number">255</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">255</span>;
          <span class="hljs-keyword">this</span>.setState({value});
        },
        <span class="hljs-keyword">this</span>.props.interval
      );
    };

    setInterval(start, <span class="hljs-keyword">this</span>.props.delay);
  },

  componentWillUnmount() {
    clearInterval(<span class="hljs-keyword">this</span>._interval);
  },
});

<span class="hljs-keyword">var</span> Program = React.createClass({
  render() {
    <span class="hljs-keyword">return</span> (
      &lt;Board&gt;
        &lt;FlashingLed pin={13} interval={1000} /&gt;
        &lt;FlashingLed pin={14} interval={1000} delay={500} /&gt;
      &lt;/Board&gt;
    )
  }
});

React.render(&lt;Program /&gt;, '/dev/cu.usbmodem1411');
</code></pre>
<h2>The Future of Hardware</h2>
<p>This would not be possible without the amazing work of the React team and the
nodebots community: Rick Waldron and the <a href="http://johnny-five.io/">Johnny-Five</a>
contributors, the <a href="http://cylonjs.com/documentation/getting-started/">Cylon.js</a>
team, Julian Gautier for the Firmata bindings, and Chris Williams have all
created amazing things that make this possible.</p>
<p>Now imagine what will happen when we bring the developer workflow React provides
to hardware. Imagine what people will create when we can provide educational
warnings and alerts during the code-writing phase. Imagine running your hardware
code in a browser attached to <a href="https://github.com/facebook/react-devtools">React Developer Tools</a>
to inspect and manipulate the state of your board on the fly. What becomes
possible when Dan Abramov’s <a href="http://gaearon.github.io/react-hot-loader/">React Hot Loader</a>
is connected to your hardware devices?</p>
<p>Currently, the code works for digital and analog writes and reads. Adding simple
components has become <a href="https://gist.github.com/iamdustan/d4e924e7766967130bd0">quite trivial</a>.
Although the project is in it’s early days, you can get started now with <code>npm install react-hardware</code>.
There are still a few core React things that need to be completed before an
official release of any sort.</p>
<h2>What’s next?</h2>
<p>I’m currently in the process of rewriting the entire codebase to be simpler and
more idiomatic as well as align with the direction React is going. Unit tests
are good to have, too. What you find on github today is a great proof of
concept. What will be coming soon is a real project with documentation, tests,
and integration into the greater React ecosystem.</p>
</div><hr style="margin-bottom:3rem;" data-reactid="13"/><noscript data-reactid="14"></noscript><div data-reactid="15"><img src="/iamdustan.jpg" style="border:1px solid #fff;box-shadow:0 0 2px rgba(0, 0, 0, 0.125);float:left;transform:rotate(90deg);margin-top:0.5rem;width:3.75rem;" data-reactid="16"/><p style="margin-left:3.375rem;" data-reactid="17"><!-- react-text: 18 -->These words brought to you by <!-- /react-text --><strong data-reactid="19">Dustan Kasten</strong><!-- react-text: 20 -->. A friendly, bearded, husband, father, and user interface engineer living in Charlotte, NC. Considers himself quite partial to React.js these days. <!-- /react-text --><a href="https://twitter.com/iamdustan" data-reactid="21">Find @iamdustan on Twitter</a></p></div></div><footer style="color:#999;font-size:0.5rem;text-align:right;" data-reactid="22"><span data-reactid="23"><!-- react-text: 24 -->Content licensed under <!-- /react-text --><a href="http://creativecommons.org/licenses/by-nc/4.0/" data-reactid="25">CC BY-NC 4.0</a></span></footer><span style="display:block;clear:both;" data-reactid="26"> </span></div></div><script src="/bundle.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-37699943-1', 'auto');ga('send', 'pageview');</script></script></body></html>